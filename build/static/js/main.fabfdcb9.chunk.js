(this["webpackJsonpboite-a-recettes"]=this["webpackJsonpboite-a-recettes"]||[]).push([[0],{30:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/default.95c7b733.png"},40:function(e,t,n){},41:function(e,t,n){},50:function(e,t,n){var a={"./chocolat.png":51,"./default.png":30,"./epinard.png":52,"./hamburger.png":53,"./pizza.png":54,"./saumon.png":55,"./tartine.png":56};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=50},51:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/chocolat.4f8e8202.png"},52:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/epinard.b6cee54a.png"},53:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/hamburger.87c9ecf6.png"},54:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/pizza.e8d7fc4c.png"},55:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/saumon.eb176fd3.png"},56:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/tartine.6c4654a2.png"},61:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),c=n.n(r),s=n(32),i=n.n(s),o=(n(40),n(41),n(20)),u=n.n(o),l=n(27),d=n(10),p=n(11),h=n(21),j=n(13),m=n(12),b=n(14),f=n(22),g=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={nom:"",image:"",ingredients:"",instructions:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(f.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault();var n=Object(b.a)({},e.state);e.props.ajouterRecette(n),Object.keys(n).forEach((function(e){n[e]=""})),e.setState(Object(b.a)({},n))},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("form",{className:"admin-form ajouter-recette",onSubmit:this.handleSubmit,children:[Object(a.jsx)("input",{value:this.state.nom,onChange:this.handleChange,name:"nom",type:"text",placeholder:"nom de la recette"}),Object(a.jsx)("input",{value:this.state.image,onChange:this.handleChange,name:"image",type:"text",placeholder:"nom de l'image"}),Object(a.jsx)("textarea",{value:this.state.ingredients,onChange:this.handleChange,name:"ingredients",rows:"3",placeholder:"Liste des ingredients"}),Object(a.jsx)("textarea",{value:this.state.instructions,onChange:this.handleChange,name:"instructions",rows:"15",placeholder:"Liste des instructions"}),Object(a.jsx)("button",{type:"submit",children:"+ Ajouter une recette"})]})})}}]),n}(r.Component),v=function(e){var t=e.id,n=e.majRecette,r=e.recettes,c=e.supprimerRecette,s=r[t],i=function(e,t){var a=e.target,c=a.name,s=a.value,i=r[t];i[c]=s,n(t,i)};return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("form",{className:"admin-form",children:[Object(a.jsx)("input",{value:s.nom,onChange:function(e){return i(e,t)},type:"text",name:"nom",placeholder:"Nom de la recette"}),Object(a.jsx)("input",{value:s.image,onChange:function(e){return i(e,t)},type:"text",name:"image",placeholder:"Adresse de l'image"}),Object(a.jsx)("textarea",{value:s.ingredients,onChange:function(e){return i(e,t)},name:"ingredients",rows:"3",placeholder:"Liste des ingr\xe9dients"}),Object(a.jsx)("textarea",{value:s.instructions,onChange:function(e){return i(e,t)},name:"instructions",rows:"15",placeholder:"Liste des instructions"})]}),Object(a.jsx)("button",{onClick:function(){return c(t)},children:"Supprimer"})]})},O=function(e){var t=e.authenticate;return Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("h2",{children:"Connecte toi pour cr\xe9er tes recettes"}),Object(a.jsx)("button",{onClick:t,className:"facebook-button",children:"Me connecter avec Facebook"})]})},x=n(16),C=(n(43),n(33)),y=n.n(C),S=(n(46),x.default.initializeApp({apiKey:"AIzaSyCjL7wcOszA3yx6zteaYvEMxmE_Gc9JL4w",authDomain:"boite-a-recettes-a20d2.firebaseapp.com",databaseURL:"https://boite-a-recettes-a20d2-default-rtdb.europe-west1.firebasedatabase.app/"})),k=y.a.createClass(S.database()),w=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={uid:null,chef:null},e.handleAuth=function(){var t=Object(l.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.fetch(e.props.pseudo,{context:Object(h.a)(e)});case 2:if((a=t.sent).chef){t.next=6;break}return t.next=6,k.post("".concat(e.props.pseudo,"/chef"),{data:n.user.uid});case 6:e.setState({uid:n.user.uid,chef:a.chef||n.user.uid});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.authenticate=function(){var t=new x.default.auth.FacebookAuthProvider;S.auth().signInWithPopup(t).then(e.handleAuth)},e.logout=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("D\xe9connexion"),t.next=3,x.default.auth().signOut();case 3:e.setState({uid:null});case 4:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.default.auth().onAuthStateChanged((function(t){t&&e.handleAuth({user:t})}))}},{key:"render",value:function(){var e=this.props,t=e.recettes,n=e.ajouterRecette,r=e.majRecette,c=e.chargerExemple,s=e.supprimerRecette,i=Object(a.jsx)("button",{onClick:this.logout,children:"D\xe9cconnexion"});return this.state.uid?this.state.uid!==this.state.chef?Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Tu n'es pas le chef de cette boite !"}),i]}):Object(a.jsxs)("div",{className:"cards",children:[Object(a.jsx)(g,{ajouterRecette:n}),Object.keys(t).map((function(e){return Object(a.jsx)(v,{id:e,majRecette:r,supprimerRecette:s,recettes:t},e)})),Object(a.jsxs)("footer",{children:[i,Object(a.jsx)("button",{onClick:c,children:"Remplir"})]})]}):Object(a.jsx)(O,{authenticate:this.authenticate})}}]),n}(r.Component),A=c.a.createContext(),R=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={color:"seagreen"},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(a.jsx)(A.Provider,{value:{state:this.state},children:this.props.children})}}]),n}(r.Component),z=function(e){var t=e.pseudo,n=function(e){return/[aeiouy]/i.test(e[0])?"d'".concat(e):"de ".concat(e)};return Object(a.jsx)(A.Consumer,{children:function(e){return Object(a.jsx)("header",{style:{backgroundColor:e.state.color},children:Object(a.jsxs)("h1",{children:["La boite \xe0 recette ",n(t)]})})}})},N=function(e){var t=e.details,r=t.ingredients.split(",").map((function(e){return Object(a.jsxs)("li",{children:[" ",e," "]},e)})),c=t.instructions.split("\n").map((function(e){return Object(a.jsxs)("li",{children:[" ",e," "]},e)}));return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"image",children:Object(a.jsx)("img",{src:function(e){try{return n(50)("./".concat(e))}catch(t){return n(30)}}(t.image),alt:t.nom})}),Object(a.jsxs)("div",{className:"recette",children:[Object(a.jsx)("h2",{children:t.nom}),Object(a.jsx)("ul",{className:"liste-ingredients",children:r}),Object(a.jsx)("ol",{className:"liste-instrcutions",children:c})]})]})},P={recette1:{nom:"Salade d'\xe9pinards du Soleil",image:"epinard.png",ingredients:"450g d'\xc9pinards, 2 Pommes, 6 tranches de Bacon, 1 Oignon",instructions:"Laver et couper en 2 les feuilles d'\xe9pinards.\nPr\xe9parer une sauce vinaigrette.\nLaver et couper les pommes. Emincer l'oignon. Faire griller le Bacon.\nAjouter le tout aux \xe9pinards.\nS'accorde bien avec un Pinot Blanc."},recette2:{nom:"Amour de Saumon",image:"saumon.png",ingredients:"2 pav\xe9s de Saumon, 10 Tomates Cerises, 1 gousse d'Ail, 1 Citron",instructions:"Pr\xe9chauffer le four \xe0 180\xb0C.\nPeler et \xe9mincer la gousse d'ail.\nCouper les tomates cerises en deux.\nD\xe9poser chaque pav\xe9 de saumon au centre d'une feuille de cuisson et ajouter autour l'ail, les tomates cerises et le jus de citron.\nFermer les papillotes et enfourner 30 minutes.\nS'accorde bien avec un Pouilly Fum\xe9."},recette3:{nom:"Hamburger Maison",image:"hamburger.png",ingredients:"2 gros Steacks Hach\xe9s, 2 Buns, 80g de Cheddar, 4 tranches de Bacon, 1 Oignon, Ketchup ou sauce BBQ, Salade",instructions:"Peler et couper l'oignon en rondelles puis les faire fondre \xe0 la po\xeale avec une noix de beurre.\nFaire cuire les Steacks.\nFaire revenir les tranches de Bacon.\nFaire dorer les Buns au four.\nMonter le Hamburger dans cet ordre : oignons, bacon, steack, sauce, cheddar, salade.\nS'accorde bien avec un Coca-Cola."},recette4:{nom:"Tartines \xe0 l'Italienne",image:"tartine.jpg",ingredients:"1/2 Baguette, Mozzarella, Jambon, Tapenade verte, 1 Tomate, 1 gousse d'Ail, Basilic",instructions:"Trancher la baguette pour en faire des tartines.\nLes faire l\xe9g\xe8rement dorer au four avec un peu d'huile d'olive.\nFrotter le pain avec la gousse d'ail coup\xe9e en deux.\nTartiner la tapenade sur les tartines.\nAjouter les tranches de jambon et les feuilles de basilic cisel\xe9es.\nS'accorde bien avec un Pinot Noir."},recette5:{nom:"Pizza au Chorizo",image:"pizza.png",ingredients:"P\xe2te \xe0 Pizza, Sauce Tomate, Fromage rap\xe9, 100g de Chorizo, 1 Poivron, Olives",instructions:"\xc9mincer le poivron et le faire revenir dans un peu d'huile.\n\xc9taler la sauce tomate sur la p\xe2te \xe0 Pizza et ajouter le chorizo et les olives.\nParsemer de fromage rap\xe9.\nEnfourner 20 minutes \xe0 180\xb0C.\nS'accorde bien avec un Madiran."},recette6:{nom:"Moelleux au Chocolat",image:"chocolat.png",ingredients:"200g de Chocolat, 125g de Beurre, 125g de Sucre, 4 Oeufs, 125g de Farine, 1 sachet de Levure",instructions:"Pr\xe9chauffer le four \xe0 180\xb0C.\nFaire fondre le chocolat au bain-marie avec le beurre.\nM\xe9langer les jaunes avec le sucre.\nAjouter le chocolat fondu.\nAjouter la farine et la levure.\nMonter les blancs en neige et incorporer le m\xe9lange pr\xe9c\xe9dent.\nCuire pendant 30 minutes.\nS'accorde bien avec un Banyuls."}},B=function(e){return function(t){Object(j.a)(r,t);var n=Object(m.a)(r);function r(){var e;Object(d.a)(this,r);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return(e=n.call.apply(n,[this].concat(a))).state={pseudo:e.props.match.params.pseudo,recettes:{}},e.ajouterRecette=function(t){var n=Object(b.a)({},e.state.recettes);n["recette-".concat(Date.now())]=t,e.setState({recettes:n})},e.majRecette=function(t,n){var a=Object(b.a)({},e.state.recettes);a[t]=n,e.setState({recettes:a})},e.supprimerRecette=function(t){var n=Object(b.a)({},e.state.recettes);n[t]=null,e.setState({recettes:n})},e.chargerExemple=function(){return e.setState({recettes:P})},e}return Object(p.a)(r,[{key:"componentDidMount",value:function(){this.ref=k.syncState("/".concat(this.state.pseudo,"/recettes"),{context:this,state:"recettes"}),this.setState({update:!0}),console.log("componentDidMount")}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate")}},{key:"componentWillUnmount",value:function(){k.removeBinding(this.ref)}},{key:"render",value:function(){return Object(a.jsx)(e,Object(b.a)({recettes:this.state.recettes,ajouterRecette:this.ajouterRecette,majRecette:this.majRecette,supprimerRecette:this.supprimerRecette,chargerExemple:this.chargerExemple},this.props))}}]),r}(r.Component)}((function(e){var t=e.match,n=e.recettes,r=e.ajouterRecette,c=e.majRecette,s=e.supprimerRecette,i=e.chargerExemple,o=(e.test,Object.keys(n).map((function(e){return Object(a.jsx)(N,{details:n[e]},e)})));return Object(a.jsx)(R,{children:Object(a.jsxs)("div",{className:"box",children:[Object(a.jsx)(z,{pseudo:t.params.pseudo}),Object(a.jsx)("div",{className:"cards",children:o}),Object(a.jsx)(w,{pseudo:t.params.pseudo,recettes:n,ajouterRecette:r,majRecette:c,supprimerRecette:s,chargerExemple:i})]})})})),M=n(5),D=function(e){return function(t){return Object(a.jsx)(e,Object(b.a)({placeholder:"Mon HOC"},t))}}(function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pseudo:"",goToApp:!1},e.goToApp=function(t){t.preventDefault(),e.setState({goToApp:!0})},e.handleChange=function(t){var n=t.target.value;e.setState({pseudo:n})},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.goToApp?Object(a.jsx)(M.a,{push:!0,to:"/pseudo/".concat(this.state.pseudo)}):Object(a.jsx)("div",{className:"connexionBox",children:Object(a.jsxs)("form",{className:"connexion",onSubmit:this.goToApp,children:[Object(a.jsx)("h1",{children:"Ma Bo\xeete \xe0 Recettes"}),Object(a.jsx)("input",{type:"text",value:this.state.pseudo,onChange:this.handleChange,placeholder:this.props.placeholder,pattern:"[A-Za-z-]{1,}",required:!0}),Object(a.jsx)("button",{type:"submit",children:"GO"}),Object(a.jsx)("p",{children:"Pas de caract\xe8res sp\xe9ciaux."})]})})}}]),n}(r.Component)),E=function(){return Object(a.jsx)("h2",{className:"notFound",children:"Y'a rien ici!"})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=n(26),T=function(){return Object(a.jsx)(F.a,{children:Object(a.jsxs)(M.d,{children:[Object(a.jsx)(M.b,{exact:!0,path:"/",component:D}),Object(a.jsx)(M.b,{path:"/pseudo/:pseudo",component:B}),Object(a.jsx)(M.b,{component:E})]})})};i.a.render(Object(a.jsx)(T,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[61,1,2]]]);
//# sourceMappingURL=main.fabfdcb9.chunk.js.map