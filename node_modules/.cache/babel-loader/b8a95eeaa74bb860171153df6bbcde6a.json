{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/Users/benjamindesole/Documents/GitHub/boite-a-recettes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/benjamindesole/Documents/GitHub/boite-a-recettes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/benjamindesole/Documents/GitHub/boite-a-recettes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/benjamindesole/Documents/GitHub/boite-a-recettes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/benjamindesole/Documents/GitHub/boite-a-recettes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import recettes from'../recettes';//firebse\nimport base from'../base';var withFirebase=function withFirebase(WrappedComponent){var _temp;return _temp=/*#__PURE__*/function(_Component){_inherits(HOC,_Component);var _super=_createSuper(HOC);function HOC(){var _this;_classCallCheck(this,HOC);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={pseudo:_this.props.match.params.pseudo,recettes:{}};_this.ajouterRecette=function(recette){var recettes=_objectSpread({},_this.state.recettes);recettes[\"recette-\".concat(Date.now())]=recette;_this.setState({recettes:recettes});};_this.majRecette=function(key,newRecette){var recettes=_objectSpread({},_this.state.recettes);recettes[key]=newRecette;_this.setState({recettes:recettes});};_this.supprimerRecette=function(key){var recettes=_objectSpread({},_this.state.recettes);recettes[key]=null;_this.setState({recettes:recettes});};_this.chargerExemple=function(){return _this.setState({recettes:recettes});};return _this;}_createClass(HOC,[{key:\"componentDidMount\",value:function componentDidMount(){this.ref=base.syncState(\"/\".concat(this.state.pseudo,\"/recettes\"),{context:this,state:'recettes'});this.setState({update:true});console.log('componentDidMount');}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){console.log('componentDidUpdate');}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({recettes:this.state.recettes,ajouterRecette:this.ajouterRecette,majRecette:this.majRecette,supprimerRecette:this.supprimerRecette,chargerExemple:this.chargerExemple},this.props));}}]);return HOC;}(Component),_temp;};export default withFirebase;","map":{"version":3,"sources":["/Users/benjamindesole/Documents/GitHub/boite-a-recettes/src/hoc/withFirebase.js"],"names":["React","Component","recettes","base","withFirebase","WrappedComponent","state","pseudo","props","match","params","ajouterRecette","recette","Date","now","setState","majRecette","key","newRecette","supprimerRecette","chargerExemple","ref","syncState","context","update","console","log","removeBinding"],"mappings":"g4BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CAEA;AACA,MAAOC,CAAAA,IAAP,KAAiB,SAAjB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,gBAAgB,uUAE7BC,KAF6B,CAErB,CACJC,MAAM,CAAE,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAD5B,CAEJL,QAAQ,CAAE,EAFN,CAFqB,OAwB7BS,cAxB6B,CAwBZ,SAAAC,OAAO,CAAI,CACxB,GAAMV,CAAAA,QAAQ,kBAAQ,MAAKI,KAAL,CAAWJ,QAAnB,CAAd,CACAA,QAAQ,mBAAYW,IAAI,CAACC,GAAL,EAAZ,EAAR,CAAoCF,OAApC,CACA,MAAKG,QAAL,CAAc,CAAEb,QAAQ,CAARA,QAAF,CAAd,EACH,CA5B4B,OA8B7Bc,UA9B6B,CA8BhB,SAACC,GAAD,CAAMC,UAAN,CAAqB,CAC9B,GAAMhB,CAAAA,QAAQ,kBAAQ,MAAKI,KAAL,CAAWJ,QAAnB,CAAd,CACAA,QAAQ,CAACe,GAAD,CAAR,CAAgBC,UAAhB,CACA,MAAKH,QAAL,CAAc,CAAEb,QAAQ,CAARA,QAAF,CAAd,EACH,CAlC4B,OAoC7BiB,gBApC6B,CAoCV,SAAAF,GAAG,CAAI,CACtB,GAAMf,CAAAA,QAAQ,kBAAQ,MAAKI,KAAL,CAAWJ,QAAnB,CAAd,CACAA,QAAQ,CAACe,GAAD,CAAR,CAAgB,IAAhB,CACA,MAAKF,QAAL,CAAc,CAAEb,QAAQ,CAARA,QAAF,CAAd,EACH,CAxC4B,OA0C7BkB,cA1C6B,CA0CZ,iBAAM,OAAKL,QAAL,CAAc,CAAEb,QAAQ,CAARA,QAAF,CAAd,CAAN,EA1CY,4FAOV,CACf,KAAKmB,GAAL,CAAWlB,IAAI,CAACmB,SAAL,YAAmB,KAAKhB,KAAL,CAAWC,MAA9B,cAAiD,CACxDgB,OAAO,CAAE,IAD+C,CAExDjB,KAAK,CAAE,UAFiD,CAAjD,CAAX,CAIA,KAAKS,QAAL,CAAc,CAAES,MAAM,CAAE,IAAV,CAAd,EACAC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACH,CAd4B,+DAgBR,CACjBD,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACH,CAlB4B,mEAoBN,CACnBvB,IAAI,CAACwB,aAAL,CAAmB,KAAKN,GAAxB,EACH,CAtB4B,uCA4CpB,CACL,mBACI,KAAC,gBAAD,gBACI,QAAQ,CAAE,KAAKf,KAAL,CAAWJ,QADzB,CAEI,cAAc,CAAE,KAAKS,cAFzB,CAGI,UAAU,CAAE,KAAKK,UAHrB,CAII,gBAAgB,CAAE,KAAKG,gBAJ3B,CAKI,cAAc,CAAE,KAAKC,cALzB,EAMS,KAAKZ,KANd,EADJ,CAUH,CAvD4B,iBACfP,SADe,SAArC,CA4DA,cAAeG,CAAAA,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport recettes from '../recettes'\n\n//firebse\nimport base from '../base'\n\nconst withFirebase = WrappedComponent => (\n    class HOC extends Component {\n        state = {\n            pseudo: this.props.match.params.pseudo,\n            recettes: {}\n        }\n\n        componentDidMount(){\n            this.ref = base.syncState(`/${this.state.pseudo}/recettes`, {\n                context: this,\n                state: 'recettes'\n            })\n            this.setState({ update: true})\n            console.log('componentDidMount');\n        }\n    \n        componentDidUpdate() {\n            console.log('componentDidUpdate');\n        }\n    \n        componentWillUnmount() {\n            base.removeBinding(this.ref)\n        }\n    \n        ajouterRecette = recette => {\n            const recettes = { ...this.state.recettes }\n            recettes[`recette-${Date.now()}`] = recette\n            this.setState({ recettes })\n        }\n    \n        majRecette = (key, newRecette) => {\n            const recettes = { ...this.state.recettes }\n            recettes[key] = newRecette\n            this.setState({ recettes })\n        }\n    \n        supprimerRecette = key => {\n            const recettes = { ...this.state.recettes }\n            recettes[key] = null\n            this.setState({ recettes })\n        }\n    \n        chargerExemple = () => this.setState({ recettes })\n\n        render() {\n            return (\n                <WrappedComponent\n                    recettes={this.state.recettes}\n                    ajouterRecette={this.ajouterRecette}\n                    majRecette={this.majRecette}\n                    supprimerRecette={this.supprimerRecette}\n                    chargerExemple={this.chargerExemple}\n                    { ...this.props}\n                />\n            );\n        }\n    }\n)\n\n\nexport default withFirebase;"]},"metadata":{},"sourceType":"module"}